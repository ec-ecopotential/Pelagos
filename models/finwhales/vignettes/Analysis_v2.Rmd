---
title: "2. Analysis and Modelling"
author: "Samuel Bosch"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{2. Analysis and Modelling}
  %\VignetteEncoding{UTF-8}
  %\VignetteEngine{knitr::rmarkdown}
editor_options: 
  chunk_output_type: console
---

Fetching (relevant) data from FTP

### Daily SST values

sftp://ispra_ecop@frontend.recas.ba.infn.it/lustre/ecopotential/incoming/PAs/LME2_Med_Pelagos_Sanctuari/EO_Biophysical/SST_L4_daily/20080101_med_sst_l4.tif

### Monthly Chlorophyll values

sftp://ispra_ecop@frontend.recas.ba.infn.it/lustre/ecopotential/incoming/PAs/LME2_Med_Pelagos_Sanctuari/EO_Biophysical/CHL_L4_monthly/199801_med_chl_l4.tif

```{r}
library(RCurl)
pwd <- read.table("PASSWORD", stringsAsFactors = FALSE)[1,1]
rooturl <- "sftp://frontend.recas.ba.infn.it/lustre/ecopotential/incoming/PAs/LME2_Med_Pelagos_Sanctuari/EO_Biophysical/"
userpwd <- paste0("ispra_ecop:", pwd)

sstrooturl <- paste0(rooturl, "SST_L4_daily/")
fname <- "20080101_med_sst_l4.tif"
outfile <- paste0('modeldata/sst/', fname)
if(!file.exists(outfile)) {
# filenames <- getURL(rooturl, userpwd=userpwd, ftp.use.epsv = FALSE, dirlistonly = TRUE)
# destnames <- filenames <-  strsplit(filenames, "\r*\n")[[1]] # destfiles = origin file names
  con <-  getCurlHandle( ftp.use.epsv = FALSE, userpwd=userpwd)
  bin <- getBinaryURL(paste0(sstrooturl, fname), curl = con, dirlistonly = FALSE)
  writeBin(bin, outfile)
}
```

